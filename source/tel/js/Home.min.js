var baseUrl="http://lan.tackleapp.ir/",MyQuestions=[],index="",setAnswer=0;function requestOtp(t,e,s,r){try{$.ajax({url:baseUrl+"/Home/RequestOtp",type:"POST",cache:!1,data:{msisdn:t,serviceId:e,refCode:s},success:function(t){r(t)},error:function(t){alert(t.Message)}})}catch(t){throw console.log(t),t}}function confirmOtp(t,e,s,r){try{$.ajax({url:baseUrl+"/Home/ConfirmOtp",type:"POST",data:{msisdn:t,otpCode:e,serviceId:s},success:function(t){r(t)},error:function(t){alert(t.Status)}})}catch(t){alert(t)}}function sleep(t){return new Promise(e=>setTimeout(e,t))}async function callsleep(t){await sleep(t)}function getWelcomeGift(t,e,s){try{$.ajax({url:baseUrl+"/Home/GetWelcomeGift",type:"POST",data:{msisdn:t,serviceId:e},success:function(t){s(t)},error:function(t){alert(t.Data)}})}catch(t){alert("getWelcomeGift"+t)}}function isValidMsisdn(t){var e=t.length;return!(""===t||!(e>=10&&e<=12))}function formStateToConfirm(){$("#plcDescriptions_R3").hide(),$("#dHeader").hide(),$("#machineDIV").hide(),$("#frmMsisdn").slideUp(1e3),$("#frmConfirm").animate({opacity:"show"},1e3);var t=$("#hdnvalidLan").val();"L1"===t.toUpperCase()&&($("#ImgFajr2").attr("src","/assets/img/otp.png"),$("#ImgFajr3").attr("src","/assets/img/Level2.png")),"L2"===t.toUpperCase()&&($("#ImgFajr2").attr("src","/assets/img/otp2.png"),$("#ImgFajr3").attr("src","/assets/img/Level2.png")),"L22"===t.toUpperCase()&&($("#ImgFajr2").attr("src","/assets/img/otp2.png"),$("#ImgFajr3").attr("src","/assets/img/Level2.png")),"L3"===t.toUpperCase()&&($("#ImgFajr2").attr("src","/assets/img/otp3.png"),$("#ImgFajr3").attr("src","/assets/img/Level23.png")),"L4"===t.toUpperCase()&&($("#ImgFajr2").attr("src","/assets/img/otp4.png"),$("#ImgFajr3").attr("src","/assets/img/Level23.png")),"L5"===t.toUpperCase()&&($("#ImgFajr2").attr("src","/assets/img/otp5.png"),$("#ImgFajr3").attr("src","/assets/img/Level25.png")),"L55"===t.toUpperCase()&&($("#ImgFajr2").attr("src","/assets/img/otp5.png"),$("#ImgFajr3").attr("src","/assets/img/Level25.png")),"L6"===t.toUpperCase()&&($("#ImgFajr2").attr("src","/assets/img/otp6.png"),$("#ImgFajr3").attr("src","/assets/img/Level25.png")),"L7"===t.toUpperCase()&&$("#ImgFajr2").attr("src","/assets/img/otp7_p1.png"),"L8"===t.toUpperCase()&&($("#ImgFajr2").attr("src","/assets/img/otp8.png"),$("#ImgFajr3").attr("src","/assets/img/Level27.png")),"L9"===t.toUpperCase()&&$("#ImgFajr2").attr("src","/assets/img/otp9_p1.png"),"L10"===t.toUpperCase()&&($("#ImgFajr2").attr("src","/assets/img/otp10.png"),$("#ImgFajr3").attr("src","/assets/img/Level210.png"));var e=4,s=60;setInterval(function(){s=--s,$("#timer").html(e+" : "+s),s<=0&&e<=0?location.reload():s<=0&&e>0?(e=--e,s=59,$("#timer").html(e+" : "+s)):$("#timer").html(e+" : "+s)},1e3)}function formStateToConfirm2(){$("#plcDescriptions_R3").hide(),$("#dHeader").hide(),$("#machineDIV").hide(),$("#Program").slideUp(1e3),$("#frmConfirm2").animate({opacity:"show"},1e3);var t=$("#hdnvalidLan").val();"L9"===t&&$("#ImgFajr6").attr("src","/assets/img/otp93_p1.png"),"L10"===t&&($("#ImgFajr6").attr("src","/assets/img/otp103.png"),$("#ImgFajr7").attr("src","/assets/img/Level103.png"));var e=4,s=60;setInterval(function(){s=--s,$("#timer2").html(e+" : "+s),s<=0&&e<=0?location.reload():s<=0&&e>0?(e=--e,s=59,$("#timer").html(e+" : "+s)):$("#timer").html(e+" : "+s)},1e3)}function formStateToWelcome(){$("#row1").hide(500),$("#frmConfirm").hide(500),$("#row3").hide(500,function(){$(".form-bottom").css("padding-top","10px"),$("#frmWelcome").removeClass("hide")})}function encode64(){var t=btoa("9123897801/1000021/9123897801");console.log(t);var e=atob(t);console.log(e)}$(document).ready(function(){function t(){var t=10,s=setInterval(function(){if(t=--t,$("#ttime").html(t),t<=0){var r=$("#hdnCurrentQu").val();clearInterval(s),$("#Item"+MyQuestions[r].Answer.toString()).css("background-color","green"),$("#Item"+MyQuestions[r].Answer.toString()).css("color","white");var a=$("#hdnPointNot").val();$("#hdnPointNot").val(parseInt(a)+1),$("#not").html(""),$("#not").append(parseInt(a)+1);var i=parseInt($("#hdnPoint").val());$("#ok").html(""),$("#ok").append(i),setTimeout(e,800)}else 1===setAnswer?clearInterval(s):$("#ttime").html(t)},1e3)}function e(){var s=$("#hdnCurrentQu").val(),r=$("#hdnPointNot").val();(1===(s=parseInt(s)+1)?$("#imglevel").attr("src","/assets/img/level-l11-2.png"):2===s&&$("#imglevel").attr("src","/assets/img/level-l11-3.png"),s>2)&&(parseInt($("#hdnPoint").val())>=2?($("#Questions").hide(),$("#frmMsisdn").animate({opacity:"show"},1e3),clearInterval(interval)):($("#Questions").hide(),$("#Sorry").animate({opacity:"show"},1e3),$("#Sorry").css("display","grid"),clearInterval(interval)));$(".Qu").html("");var a="";setAnswer=0,a='<div  style="border-style:solid; width:10% !important;margin:0 auto;margin-top:5%;border-color:#ff00bb;border-radius:50px;width: 50px !important;height: 50px!important;; background-color: #f2f2f2;color:black; padding-top: 3%;"><span id="ttime"></span></div>',a+='<div  style="display:grid;border-style:solid;border-radius:15px;border-color:white;padding:10px; width:90% !important;margin:0 auto;margin-top:5%;border-color:white;">',a+='<div class="col-lg-12" style="background-color:#ff00bb;color:white;font-family:yekan;font-size:20px;    border-radius: 10px;border - color: yellow;border - style: solid;padding-top:10px;padding-bottom: 10px;line-height: 24px;">'+MyQuestions[s].Question1+"</div> ",a+=' <div style="width:100%;margin:0 auto; display:flex;margin-top:5%;"><div class="leftbox QuOption" id="Item1" style="padding-top:8%;">'+MyQuestions[s].Item1+'</div><div class="rightbox QuOption" id="Item2" style="padding-top:8%;">'+MyQuestions[s].Item2+"</div> </div>",a+=' <div style="width:100%;margin:0 auto; display:flex;margin-top:5%;"><div class="leftbox QuOption" id="Item3" style="padding-top:8%;">'+MyQuestions[s].Item3+'</div><div class="rightbox QuOption" id="Item4" style="padding-top:8%;">'+MyQuestions[s].Item4+"</div> </div>",a+=" </div>",$(".Qu").append(a),$("#hdnCurrentQu").val(s),t(),$(".QuOption").click(async function(){var t=this.id;if(t.replace("Item","").toString()==MyQuestions[s].Answer.toString()){$("#Item"+t.replace("Item","").toString()).css("background-color","green"),$("#Item"+t.replace("Item","").toString()).css("color","white");var a=$("#hdnPoint").val();$("#hdnPoint").val(parseInt(a)+1),setTimeout(e,800),$("#ok").html(""),$("#ok").append($("#hdnPoint").val()),setAnswer=1}else $("#Item"+t.replace("Item","").toString()).css("background-color","red"),$("#Item"+t.replace("Item","").toString()).css("color","white"),$("#Item"+MyQuestions[s].Answer.toString()).css("background-color","green"),$("#Item"+MyQuestions[s].Answer.toString()).css("color","white"),setTimeout(e,800),$("#hdnPointNot").val(parseInt(r)+1),$("#not").html(""),$("#not").append(parseInt(r)+1),setAnswer=1})}$("#img1").click(async function(){$("#img1").css("border-style","solid"),$("#img1").css("border-width","thick"),$("#img1").css("border-color","red"),$("#img1").css("padding","5px"),$("#img1").css("border-radius","25px"),$("#img2").css("border-style","none"),$("#img3").css("border-style","none"),$("#img4").css("border-style","none")}),$("#img2").click(async function(){$("#img2").css("border-style","solid"),$("#img2").css("border-width","thick"),$("#img2").css("border-color","red"),$("#img2").css("padding","5px"),$("#img2").css("border-radius","25px"),$("#img1").css("border-style","none"),$("#img3").css("border-style","none"),$("#img4").css("border-style","none")}),$("#img3").click(async function(){$("#img3").css("border-style","solid"),$("#img3").css("border-width","thick"),$("#img3").css("border-color","red"),$("#img3").css("padding","5px"),$("#img3").css("border-radius","25px"),$("#img1").css("border-style","none"),$("#img2").css("border-style","none"),$("#img4").css("border-style","none")}),$("#img4").click(async function(){$("#img4").css("border-style","solid"),$("#img4").css("border-width","thick"),$("#img4").css("border-color","red"),$("#img4").attr("padding","5px"),$("#img4").css("border-radius","25px"),$("#img1").css("border-style","none"),$("#img2").css("border-style","none"),$("#img3").css("border-style","none")}),window.history.pushState(null,"",window.location.href),window.onpopstate=function(){window.history.pushState(null,"",window.location.href)},$(window).resize(function(){$(document).width()<=700&&($("#ImgFajr").hasClass("ImgFajrclass2")?($("#ImgFajr").removeClass("ImgFajrclass2"),$("#ImgFajr").addClass("ImgFajrclass")):$("#ImgFajr").hasClass("ImgFajrclass")&&(console.log("low"),$("#ImgFajr").removeClass("ImgFajrclass"),$("#ImgFajr").addClass("ImgFajrclass2")))}),$("#btnStart").click(async function(){$("#StartGame").hide(),$("#Questions").animate({opacity:"show"},1e3),$.ajax({url:baseUrl+"/Home/GetQuestions",type:"POST",cache:!1,data:{},success:function(s){MyQuestions=s,$(".Qu").html("");var r="";r='<div  style="border-style:solid; width:10% !important;margin:0 auto;margin-top:5%;border-color:#ff00bb;border-radius:50px;width: 50px !important;height: 50px!important;; background-color: #f2f2f2;color:black; padding-top: 3%;"><span id="ttime"></span></div>',r+='<div  style="display:grid;border-style:solid;border-radius:15px;border-color:white;padding:10px; width:90% !important;margin:0 auto;margin-top:5%;border-color:white;">',r+='<div class="col-lg-12" style="background-color:#ff00bb;color:white;font-family:yekan;font-size:20px;    border-radius: 10px;border - color: yellow;border - style: solid;padding-top:10px;padding-bottom: 10px;line-height: 24px;">'+MyQuestions[0].Question1+"</div> ",r+=' <div style="width:100%;margin:0 auto; display:flex;margin-top:3%;"><div class="leftbox QuOption" id="Item1" style="padding-top:8%;">'+MyQuestions[0].Item1+'</div><div class="rightbox QuOption" id="Item2" style="padding-top:8%;">'+MyQuestions[0].Item2+"</div> </div>",r+=' <div style="width:100%;margin:0 auto; display:flex;margin-top:3%;"><div class="leftbox QuOption" id="Item3" style="padding-top:8%;">'+MyQuestions[0].Item3+'</div><div class="rightbox QuOption" id="Item4" style="padding-top:8%;">'+MyQuestions[0].Item4+"</div> </div>",r+=" </div>",$(".Qu").append(r),t(),$("#hdnCurrentQu").val(0),$(".QuOption").click(async function(){var t=this.id;if(t.replace("Item","").toString()==MyQuestions[0].Answer.toString()){var s=parseInt($("#hdnPoint").val());$("#Item"+t.replace("Item","").toString()).css("background-color","green"),$("#Item"+t.replace("Item","").toString()).css("color","white"),$("#hdnPoint").val(parseInt(s)+1),setTimeout(e,800),$("#ok").html(""),$("#ok").append(s+1),setAnswer=1}else{$("#Item"+t.replace("Item","").toString()).css("background-color","red"),$("#Item"+t.replace("Item","").toString()).css("color","white"),$("#Item"+MyQuestions[0].Answer.toString()).css("background-color","green"),$("#Item"+MyQuestions[0].Answer.toString()).css("color","white"),setTimeout(e,800),$("#not").html(""),$("#not").append(1),$("#hdnPointNot").val(1),setAnswer=1}})},error:function(t){alert(t.status)}})}),$("#btnretry").click(async function(){location.reload()}),$("#oklink").click(async function(){$("#OkDiv").animate({opacity:"show"},1e3)}),$("#LinkClose").click(async function(){$("#OkDiv").fadeOut()}),$("body").click(function(){var t=!1;$("#OkDiv").hover(function(){t=!1},function(){t=!0}),$("body").mouseup(function(){t||$("#OkDiv").hide()})}),$("#oklink2").click(async function(){$("#OkDiv2").animate({opacity:"show"},1e3)}),$("#LinkClose2").click(async function(){$("#OkDiv2").fadeOut()}),$("body").click(function(){var t=!1;$("#OkDiv2").hover(function(){t=!1},function(){t=!0}),$("body").mouseup(function(){t||$("#OkDiv2").hide()})}),$("#btnReload").click(async function(){location.reload()}),$(window).resize(function(){$(document).width()<=700&&($("#ImgFajr").hasClass("ImgFajrclass2")?($("#ImgFajr").removeClass("ImgFajrclass2"),$("#ImgFajr").addClass("ImgFajrclass")):$("#ImgFajr").hasClass("ImgFajrclass")&&(console.log("low"),$("#ImgFajr").removeClass("ImgFajrclass"),$("#ImgFajr").addClass("ImgFajrclass2")))});var s=$("#hdnvalidLan").val();"L1"===s.toUpperCase()&&($("#ImgFajr").attr("src","/assets/img/Fajr.png"),$("#ImgFajrLevel").attr("src","/assets/img/Level1.png"),$("body").css("background","linear-gradient(#010D47 76.56%,#078524 100%)")),"L2"===s.toUpperCase()&&($("#ImgFajr").attr("src","/assets/img/Fajr2.png"),$("#ImgFajrLevel").attr("src","/assets/img/Level1.png"),$("body").css("background","linear-gradient(#010D47 76.56%,#078524 100%)")),"L22"===s.toUpperCase()&&($("#ImgFajr").attr("src","/assets/img/Fajr2.png"),$("#ImgFajrLevel").attr("src","/assets/img/Level1.png"),$("body").css("background","linear-gradient(#010D47 76.56%,#078524 100%)")),"L3"===s.toUpperCase()&&($("#ImgFajr").attr("src","/assets/img/Fajr3.png"),$("#ImgFajrLevel").attr("src","/assets/img/Level13.png"),$("body").css("background","radial-gradient( #7044F4 0%, #290047 100%)")),"L4"===s.toUpperCase()&&($("#ImgFajr").attr("src","/assets/img/Fajr4.png"),$("#ImgFajrLevel").attr("src","/assets/img/Level13.png"),$("body").css("background","radial-gradient( #7044F4 10%, #290047 100%)")),"L5"===s.toUpperCase()&&($("#ImgFajr").attr("src","/assets/img/Fajr5.png"),$("#ImgFajrLevel").attr("src","/assets/img/Level15.png"),$("body").css("background","linear-gradient(180deg, #070060 56.25%, #F72E2E 86.98%)")),"L55"===s.toUpperCase()&&($("#ImgFajr").attr("src","/assets/img/Fajr5.png"),$("#ImgFajrLevel").attr("src","/assets/img/Level15.png"),$("body").css("background","linear-gradient(180deg, #070060 56.25%, #F72E2E 86.98%)")),"L6"===s.toUpperCase()&&($("#ImgFajr").attr("src","/assets/img/Fajr6.png"),$("#ImgFajrLevel").attr("src","/assets/img/Level15.png"),$("body").css("background","linear-gradient(180deg, #F6F1B2 0%, #CAE3CC 29.69%, #98D8E3 57.29%, #4599B1 100%)")),"L7"===s.toUpperCase()&&($("#ImgFajr").attr("src","/assets/img/Fajr7_p1.png"),$("body").css("background-color","white")),"L8"===s.toUpperCase()&&($("#ImgFajr").attr("src","/assets/img/Fajr8.png"),$("#ImgFajrLevel").attr("src","/assets/img/Level17.png"),$("body").css("background","#204093")),"L9"===s.toUpperCase()&&($("#ImgFajr").attr("src","/assets/img/Fajr9_p1.png"),$("body").css("background","linear-gradient(180deg, #ffffff 15%, #ffd5fa 86.98%)")),"L10"===s.toUpperCase()&&($("#ImgFajr").attr("src","/assets/img/Fajr10.png"),$("#ImgFajrLevel").attr("src","/assets/img/Level110.png"),$("body").css("background","linear-gradient(180deg, #ffffff 35%, #60dedd 74.98%)")),"L13"===s.toUpperCase()&&($("#ImgFajr").attr("src","/assets/img/Fajr10.png"),$("#ImgFajrLevel").attr("src","/assets/img/Level110.png"),$("body").css("background","linear-gradient(rgb(255, 255, 255) 35%, #ff4700cc 74.98%)")),"L14"===s.toUpperCase()&&($("#ImgFajr").attr("src","/assets/img/Fajr10.png"),$("#ImgFajrLevel").attr("src","/assets/img/Level110.png"),$("body").css("background-image",'url("/assets/img/back14.png")')),"L11"===s&&$("body").css("background-color","#000635 ");var r=$("#hdnMsisdn").val(),a=$("#hdnFormState").val(),i=$("#hdnServiceId").val(),o=$("#hdnRefCode").val();i.length>2&&(r=i,i=1,$("#txtMsisdn").val(r),$("#hdnMsisdn").val(r),$("#hdnServiceId").val(1)),$("#frmConfirm").hide(),isValidMsisdn(r)&&($("#txtMsisdn").val(r),"EnterOtpState"===a?formStateToConfirm():"EnterMsisdnState"===a&&requestOtp(r,i,o,function(t){1===t.Status?formStateToConfirm():alert(t.Message)}))}),$("#btnRequestOtp").click(async function(){try{var t=$("#txtMsisdn").val(),e=$("#hdnRefCode").val(),s=$("#hdnServiceId").val();if(!isValidMsisdn(t))return $("#ErrorDiv").animate({opacity:"show",top:"86%"},1e3),await sleep(2e3),$("#ErrorDiv").fadeOut(),0;formStateToConfirm(),requestOtp(t,s,e,function(t){if(1===t.Status);else alert(t.Message)})}catch(t){alert(t)}}),$("#btnRequestOtp2").click(async function(){try{var t=$("#txtMsisdn2").val(),e=$("#hdnRefCode").val(),s=$("#hdnServiceId2").val();if(!isValidMsisdn(t))return $("#ErrorDiv").animate({opacity:"show",top:"86%"},1e3),await sleep(2e3),$("#ErrorDiv").fadeOut(),0;formStateToConfirm2(),requestOtp(t,s,e,function(t){if(1===t.Status);else alert("fffffffff")})}catch(t){alert(t)}}),$("#btnConfirm").click(function(){try{var t=$("#txtMsisdn").val(),e=$("#txtOtpCode").val(),s=$("#hdnServiceId").val(),r=$("#hdnvalidLan").val();confirmOtp(t,e,s,function(e){if(1===e.Status){$("#mdlServiceOffer").modal("show"),$("#frmConfirm").hide(),$("#Program").show(),$("#txtMsisdn2").val(t),$("#ImgFajr4").attr("src","/assets/img/gift.png"),"L1"===r.toUpperCase()&&$("#ImgFajr4").attr("src","/assets/img/gift.png"),"L2"===r.toUpperCase()&&$("#ImgFajr4").attr("src","/assets/img/gift2.png"),"L22"===r.toUpperCase()&&$("#ImgFajr4").attr("src","/assets/img/gift2.png"),"L3"===r.toUpperCase()&&$("#ImgFajr4").attr("src","/assets/img/gift3.png"),"L4"===r.toUpperCase()&&$("#ImgFajr4").attr("src","/assets/img/gift3.png"),"L5"===r.toUpperCase()&&$("#ImgFajr4").attr("src","/assets/img/gift5.png"),"L55"===r.toUpperCase()&&$("#ImgFajr4").attr("src","/assets/img/gift5.png"),"L6"===r.toUpperCase()&&$("#ImgFajr4").attr("src","/assets/img/gift5.png"),"L7"===r.toUpperCase()&&$("#ImgFajr4").attr("src","/assets/img/gift7_p1.png"),"L8"===r.toUpperCase()&&$("#ImgFajr4").attr("src","/assets/img/gift8.png"),"L9"===r.toUpperCase()&&($("#ImgFajr4").attr("src","/assets/img/gift912_p1.png"),$("#ImgFajr44").attr("src","/assets/img/gift91.png"),$("#ImgFajr5").attr("src","/assets/img/gift92.png")),"L10"===r.toUpperCase()&&($("#ImgFajr4").attr("src","/assets/img/gift101.png"),$("#ImgFajr5").attr("src","/assets/img/gift102.png")),"L14"===r.toUpperCase()&&($("#Program2").show(),$("body").css("background-size",""),$("#ImgFajr4").attr("src","/assets/img/gift101.png"),$("#ImgFajr5").attr("src","/assets/img/gift102.png"));var s=3,a=60;setInterval(function(){$("#timer").empty(),a=--a,$("#timer3").html(s+" : "+a),a<=0&&s<=0?$("#timer3").remove():a<=0&&s>0?(s=--s,a=59,$("#timer3").html(s+" : "+a)):$("#timer3").html(s+" : "+a)},1e3)}else alert(e.Message)})}catch(t){alert(t)}}),$("#btnConfirm2").click(function(){try{var t=$("#txtMsisdn2").val(),e=$("#txtOtpCode2").val(),s=$("#hdnServiceId2").val();$("#hdnvalidLan").val();confirmOtp(t,e,s,function(e){if(1===e.Status){$("#mdlServiceOffer").modal("show"),$("#frmConfirm2").hide(),$("#Program2").show(),$("#txtMsisdn2").val(t);var s=$("#hdnvalidLan").val();"L9"===s&&($("#ImgFajr8").attr("src","/assets/img/gift93.png"),$("#ImgFajr5").attr("src","/assets/img/Level93.png")),"L10"===s&&$("#ImgFajr8").attr("src","/assets/img/gift103.png")}else alert(e.Message)})}catch(t){alert(t)}}),$("#btnGetWelcomeGift").click(function(){try{var t=$("#txtMsisdn").val(),e=$("#hdnServiceId").val();getWelcomeGift(t,e,function(e){1===e.Status?($("#mdlServiceOffer").modal("show"),$("#plcPinCode").text(e.Data.PinCode),e.Data.PinCode<0&&$("#plcPinform").addClass("hide"),e.Data.HasServiceOffer&&($("#plcOtherServiceOffer").removeClass("hide"),$("#lnkJumpToService").attr("href",baseUrl+"/Home/Index?serviceId="+e.Data.ServiceOfferId+"&msisdn="+t))):alert(e.Message)})}catch(t){alert(t)}}),$("#btnSubNewMsisdn").click(function(){var t=$("#txtNewMsisdn").val(),e=baseUrl+"/Home/Index?msisdn="+t;window.location.assign(e)});